# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  batch: true
  branches:
    include:
    - master

variables:
  COMMIT_ID: ea36e52af2326516b4f3f2a08d94d9a4d6db48f9

resources:
  repositories:
    - repository: Cisco-8000-sonic-sdk
      type: github
      name: Cisco-8000-sonic/sdk
      endpoint: cisco-connection

stages:
- stage: Build

  jobs:
  - job: Build
    timeoutInMinutes: 1200
    pool:
      vmImage: 'ubuntu-20.04'

    steps:
    - checkout: self
      displayName: Checkout self

    - checkout: Cisco-8000-sonic-sdk
      path: sdk
      submodules: true

    - script: |
        git checkout -b test $(COMMIT_ID)
        git branch -vv
      workingDirectory: $(Pipeline.Workspace)/sdk
      displayName: "Change working branch"
